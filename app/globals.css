@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: 0 0% 100%;
        --foreground: 0 0% 100%;

        --card: 0 0% 100%;
        --card-foreground: 0 0% 3.9%;

        --popover: 0 0% 100%;
        --popover-foreground: 0 0% 3.9%;

        --primary: 0 0% 9%;
        --primary-foreground: 0 0% 98%;

        --secondary: 0 0% 96.1%;
        --secondary-foreground: 0 0% 9%;

        --muted: 0 0% 96.1%;
        --muted-foreground: 0 0% 45.1%;

        --accent: 0 0% 96.1%;
        --accent-foreground: 0 0% 9%;

        --destructive: 0 0% 60.2%;
        --destructive-foreground: 0 0% 98%;

        --border: 0 0% 89.8%;
        --input: 0 0% 89.8%;
        --ring: 0 0% 3.9%;

        --radius: 0.5rem;
    }

    /* Syntax highlighting styles for code blocks */
    .hljs {
        display: block;
        overflow-x: auto;
        padding: 0.5em;
        background: #f6f8fa;
        color: #24292e;
    }

    .dark .hljs {
        background: #0d1117;
        color: #c9d1d9;
    }

    .hljs-comment,
    .hljs-quote {
        color: #6a737d;
        font-style: italic;
    }

    .dark .hljs-comment,
    .dark .hljs-quote {
        color: #8b949e;
    }

    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-type {
        color: #d73a49;
    }

    .dark .hljs-keyword,
    .dark .hljs-selector-tag,
    .dark .hljs-type {
        color: #ff7b72;
    }

    .hljs-string,
    .hljs-doctag {
        color: #032f62;
    }

    .dark .hljs-string,
    .dark .hljs-doctag {
        color: #a5d6ff;
    }

    .hljs-title,
    .hljs-section {
        color: #6f42c1;
        font-weight: bold;
    }

    .dark .hljs-title,
    .dark .hljs-section {
        color: #d2a8ff;
    }

    .hljs-variable,
    .hljs-template-variable {
        color: #e36209;
    }

    .dark .hljs-variable,
    .dark .hljs-template-variable {
        color: #ffa657;
    }

    .hljs-number,
    .hljs-literal {
        color: #005cc5;
    }

    .dark .hljs-number,
    .dark .hljs-literal {
        color: #79c0ff;
    }

    .hljs-function .hljs-title {
        color: #6f42c1;
    }

    .dark .hljs-function .hljs-title {
        color: #d2a8ff;
    }

    .hljs-tag,
    .hljs-name,
    .hljs-attribute {
        color: #22863a;
    }

    .dark .hljs-tag,
    .dark .hljs-name,
    .dark .hljs-attribute {
        color: #7ee787;
    }

    .hljs-built_in,
    .hljs-builtin-name {
        color: #005cc5;
    }

    .dark .hljs-built_in,
    .dark .hljs-builtin-name {
        color: #79c0ff;
    }

    .hljs-meta {
        color: #6a737d;
    }

    .dark .hljs-meta {
        color: #8b949e;
    }

    .hljs-deletion {
        background: #ffeef0;
        color: #cb2431;
    }

    .dark .hljs-deletion {
        background: #490202;
        color: #ff7b72;
    }

    .hljs-addition {
        background: #f0fff4;
        color: #28a745;
    }

    .dark .hljs-addition {
        background: #0f5132;
        color: #7ee787;
    }

    .hljs-emphasis {
        font-style: italic;
    }

    .hljs-strong {
        font-weight: bold;
    }

    /* Utility classes for markdown content */
    .prose {
        max-width: none;
    }

    .prose pre {
        border-radius: 0.5rem;
        border: 1px solid #e1e8ed;
    }

    .dark .prose pre {
        border-color: #30363d;
    }

    /* Line clamp utilities */
    .line-clamp-2 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
    }

    .line-clamp-3 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
    }

    .dark {
        --background: 0 0% 4%;
        --foreground: 0 0% 100%;

        --card: 0 0% 3.9%;
        --card-foreground: 0 0% 98%;

        --popover: 0 0% 3.9%;
        --popover-foreground: 0 0% 98%;

        --primary: 0 0% 98%;
        --primary-foreground: 0 0% 9%;

        --secondary: 0 0% 14.9%;
        --secondary-foreground: 0 0% 98%;

        --muted: 0 0% 14.9%;
        --muted-foreground: 0 0% 63.9%;

        --accent: 0 0% 14.9%;
        --accent-foreground: 0 0% 98%;

        --destructive: 0 0% 30.6%;
        --destructive-foreground: 0 0% 98%;

        --border: 0 0% 14.9%;
        --input: 0 0% 14.9%;
        --ring: 0 0% 83.1%;
    }
}

/* Add this to ensure proper dark mode transitions */
html.dark {
    color-scheme: dark;
}

@layer base {
    * {
        @apply border-border;
    }
    body {
        @apply bg-background text-foreground;
        color: #ffffff;
        caret-color: #ffffff;
        font-feature-settings: "palt" 1;
    }
    html {
        scroll-behavior: smooth;
    }

    /* Universal white text override: keep text white across themes without affecting theme toggle */
    *,
    *::before,
    *::after {
        color: #ffffff !important;
        caret-color: #ffffff;
    }
    ::placeholder {
        color: #ffffff !important;
        opacity: 1;
    }
}

/* Ensure smooth transitions between light and dark mode */
* {
    transition:
        background-color 0.3s ease,
        border-color 0.3s ease;
}

/* Glass card utility */
.glass-card {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.35),
        hsl(var(--card) / 0.15)
    );
    background-color: hsl(var(--card) / 0.25);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--border) / 0.35);
    color: hsl(var(--card-foreground));
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.glass-card:hover {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.45),
        hsl(var(--card) / 0.25)
    );
    border-color: hsl(var(--border) / 0.45);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.18);
}

/* Dark mode tuning for glass */

/* Darker glass utility for question bubbles */
.glass-card-strong {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.6),
        hsl(var(--card) / 0.35)
    );
    background-color: hsl(var(--card) / 0.5);
    -webkit-backdrop-filter: blur(14px);
    backdrop-filter: blur(14px);
    border: 1px solid hsl(var(--border) / 0.5);
    color: hsl(var(--card-foreground));
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.2);
}

.dark .glass-card-strong {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.25),
        hsl(var(--card) / 0.15)
    );
    background-color: hsl(var(--card) / 0.2);
    border-color: hsl(var(--border) / 0.35);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.5);
}

/* Apply stronger glass to AskInput question bubbles without changing markup */
.bg-gradient-to-br.from-black.to-gray-800.rounded-tr-none {
    position: relative;
    overflow: hidden;
    -webkit-backdrop-filter: blur(14px);
    backdrop-filter: blur(14px);
    background-image: linear-gradient(
        to bottom right,
        rgba(0, 0, 0, 0.65),
        rgba(0, 0, 0, 0.4)
    );
    border: 1px solid rgba(255, 255, 255, 0.12);
}

.dark .bg-gradient-to-br.from-black.to-gray-800.rounded-tr-none {
    background-image: linear-gradient(
        to bottom right,
        rgba(0, 0, 0, 0.45),
        rgba(0, 0, 0, 0.28)
    );
    border-color: rgba(255, 255, 255, 0.18);
}
.dark .glass-card {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.18),
        hsl(var(--card) / 0.08)
    );
    background-color: hsl(var(--card) / 0.12);
    border-color: hsl(var(--border) / 0.25);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
}

.dark .glass-card:hover {
    background-image: linear-gradient(
        to bottom right,
        hsl(var(--card) / 0.22),
        hsl(var(--card) / 0.12)
    );
    border-color: hsl(var(--border) / 0.35);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
}

/* Japanese-inspired typography adjustments */
h1,
h2,
h3,
h4,
h5,
h6 {
    letter-spacing: -0.025em;
    font-weight: 300;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background-color: rgba(155, 155, 155, 0.5);
    border-radius: 20px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: rgba(155, 155, 155, 0.7);
}

/* Custom cursor for Japanese headings */
h2[data-translation]:hover::after {
    content: attr(data-translation);
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: black;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    white-space: nowrap;
}

/* Skill hover animation */
.skill-item {
    transition: all 0.3s ease;
}

.skill-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.dark .skill-item:hover {
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
}

/* Light mode: subtle text shadows for readability on white/light backgrounds */
html:not(.dark) body,
html:not(.dark) body *:not(svg):not(path) {
    text-shadow:
        0 1px 2px rgba(0, 0, 0, 0.6),
        0 0 1px rgba(0, 0, 0, 0.55);
    -webkit-text-stroke: 0.2px rgba(0, 0, 0, 0.4);
}

/* Stronger shadow for headings and card titles in light mode */
html:not(.dark) h1,
html:not(.dark) h2,
html:not(.dark) h3,
html:not(.dark) h4,
html:not(.dark) h5,
html:not(.dark) h6,
html:not(.dark) .prose h1,
html:not(.dark) .prose h2,
html:not(.dark) .prose h3,
html:not(.dark) .prose h4 {
    text-shadow:
        0 2px 4px rgba(0, 0, 0, 0.65),
        0 0 2px rgba(0, 0, 0, 0.6);
    -webkit-text-stroke: 0.35px rgba(0, 0, 0, 0.45);
}

/* Restyle generic pill chips to accent in light mode */
html:not(.dark) .rounded.bg-neutral-50,
html:not(.dark) .rounded.bg-neutral-100,
html:not(.dark) .rounded.bg-neutral-200,
html:not(.dark) .rounded.bg-gray-50,
html:not(.dark) .rounded.bg-gray-100,
html:not(.dark) .rounded.bg-gray-200,
html:not(.dark) .rounded.bg-zinc-50,
html:not(.dark) .rounded.bg-zinc-100,
html:not(.dark) .rounded.bg-slate-50,
html:not(.dark) .rounded.bg-slate-100 {
    background-color: hsl(var(--accent)) !important;
    color: hsl(var(--accent-foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Readability helpers for forcing stronger contrast on light backgrounds */
html:not(.dark) .readable {
    text-shadow:
        0 2px 4px rgba(0, 0, 0, 0.65),
        0 0 2px rgba(0, 0, 0, 0.65);
    -webkit-text-stroke: 0.25px rgba(0, 0, 0, 0.5);
}
html:not(.dark) .readable-strong {
    text-shadow:
        0 3px 6px rgba(0, 0, 0, 0.8),
        0 0 3px rgba(0, 0, 0, 0.75);
    -webkit-text-stroke: 0.45px rgba(0, 0, 0, 0.6);
}

/* Ensure skill pills show black text when they turn white in dark mode */
html.dark .skill-item.dark\:bg-white,
.dark .skill-item.dark\:bg-white,
html.dark .skill-item.dark\:text-black,
.dark .skill-item.dark\:text-black {
    color: #000000 !important;
}

/* Light mode: set card, border, and accent to #498791 with white foreground */
html:not(.dark) {
    --card: 189 33% 43%;
    --card-foreground: 0 0% 100%;
    --border: 189 33% 30%;
    --accent: 189 33% 43%;
    --accent-foreground: 0 0% 100%;
}

/* Light mode: force pill backgrounds to use accent and keep text white */
html:not(.dark) .inline-block.rounded.bg-neutral-100,
html:not(.dark) .inline-block.rounded.bg-neutral-50,
html:not(.dark) .inline-block.rounded.bg-gray-100 {
    background-color: hsl(var(--accent));
    color: hsl(var(--accent-foreground));
    border: 1px solid hsl(var(--border));
}
